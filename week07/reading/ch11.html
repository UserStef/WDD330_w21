<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Week 07 - Reading</title>
    <link rel="icon" href="../../res/St-icon.png">
    <link rel="stylesheet" href="../../styles/mainstyle.css">
    <link rel="stylesheet" href="../../styles/week-styles.css">
    <link rel="stylesheet" href="../../styles/reading-style.css">
</head>
<body>
    <header class="navbar">
    </header>
    <div class="head">
        <span class="title btml">Week 07</span>
        <span class="subtitle"></span>
    </div>

    <div id="displayLog" class="week-contents btml">
        &#128679; Loading... &#128679;
    </div>

    <div id="actions" class="container btml">
    </div>
    
    <script src="../../scripts/nav-build.js"></script>
    <!-- <script src="../../scripts/weekPreview-build.js"></script> -->
    <script src="../../scripts/forNotes.js"></script>
    <script>
        // ♦ ─────────────── Page StepUp ─────────────── ♦ //
        const pages = [11];
        const current_chapter = 11;
        let current_page_index = -1;
        let subtitleElement = document.querySelector('.subtitle');
        function buildSubtitle(){
            current_page_index = pages.indexOf(current_chapter);
            let chapterTxt = ""+current_chapter;
            if(chapterTxt<10) {chapterTxt = "0"+chapterTxt}
            let subtitle_literal = "";
            if(current_page_index > 0){
                subtitle_literal += `<a href="ch${pages[current_page_index-1]}.html" class="arrow-link-2">&LeftTriangle;</a>&nbsp;`
            }
            subtitle_literal += `Reading notes from Chapter ${chapterTxt}`
            if(current_page_index < pages.length-1){
                subtitle_literal += `&nbsp;<a href="ch${pages[current_page_index+1]}.html" class="arrow-link-1">&RightTriangle;</a>`
            }
            subtitleElement.innerHTML = subtitle_literal;
        }
        buildSubtitle();
        // ♦ ─────────────── ─────────────── ─────────────── ♦ //


        // ♦ ─────────────── Notes StepUp ─────────────── ♦ //
        // -- Reading StepUp -- //
        let scriptLog = {};
        let btn = {};
        let btn_build = {};
        let actions = document.getElementById('actions');
        let displayLog = document.getElementById('displayLog');
        // ♦ ─────────────── ─────────────── ─────────────── ♦ //


        // ♦ ─────────────── Chapter 11 ─────────────── ♦ //

        // ── Call and Apply Methods ── //
        console.log("// ── Call and Apply Methods ── //");
        function sayHello(greeting='Hello'){
            return `${ greeting }, my name is ${ this.name }`;
        }
        console.log(sayHello.call("clark", 'How do you do'));
        // << 'How do you do, my name is Clark'
        console.log(sayHello.call("bruce"));
        // << 'Hello, my name is Bruce'

        // ─── Methods ─── //
        btn_build["Methods"] = {"tag":"div",
        "innerHTML":"Methods",
        "classList":['mbtn2-s','log-btn'],
        "log":""};
    
        scriptLog["Methods"] = function(ev){
            console.log(`// ── Methods ── //`);
            // -- code goes here
            function sayHello(greeting='Hello'){
                return `${ greeting }, my name is ${ this.name }`;
            }
            let toLog = [
                `
function sayHello(greeting='Hello'){
&nbsp;&nbsp;&nbsp;&nbsp;return \`\${ greeting }, my name is \${ this.name }\`;
}`,
                `console.log(sayHello.call("clark", 'How do you do'));`,
                `>> ${sayHello.call("clark", 'How do you do')}`,
                `console.log(sayHello.call("bruce"));`,
                `>> ${sayHello.call("bruce")}`,
                `\n`,
                `>> not working as I expected.`
            ];
            let sectionLog = ``;
            toLog.forEach(log => {
                sectionLog += ` ${log}\n`;
                // sectionLog += `\n  ≫ ${eval(log)}\n`;
            });
            btn_build["Methods"]["log"] = sectionLog;
            console.log(btn_build["Methods"]["log"]);
            logToTheDOM(sectionLog);
            note("not working as I expected.");
        };



        // ── Memoization ── //
        console.log("// ── Memoization ── //");
        function square(x){
            square.cache = square.cache || {};
            if (!square.cache[x]) {
                square.cache[x] = x*x;
            }
            return square.cache[x]
        }
        console.log(square(3));
        // << 9
        console.log(square(-11));
        // << 121
        console.log(square.cache);
        // << {"3": 9, "-11": 121}

        note("seems to work fine.");

        // ─── Memoization ─── //
        btn_build["Memoization"] = {"tag":"div",
        "innerHTML":"Memoization",
        "classList":['mbtn2-s','log-btn'],
        "log":""};
    
        scriptLog["Memoization"] = function(ev){
            console.log(`// ── Memoization ── //`);
            // -- code goes here
            function square(x){
                square.cache = square.cache || {};
                if (!square.cache[x]) {
                    square.cache[x] = x*x;
                }
                return square.cache[x]
            }
            let toLog = [
                `
function square(x){
&nbsp;&nbsp;&nbsp;&nbsp;square.cache = square.cache || {};
&nbsp;&nbsp;&nbsp;&nbsp;if (!square.cache[x]) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;square.cache[x] = x*x;
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;return square.cache[x]
}`,
                `console.log(square(3));`,
                `>> ${square(3)};`,
                `console.log(square(-11));`,
                `>> ${square(-11)};`,
                `console.log(square.cache);`,
                `>> ${JSON.stringify(square.cache)};`
            ];
            let sectionLog = ``;
            toLog.forEach(log => {
                sectionLog += ` ${log}\n`;
                // sectionLog += `\n  ≫ ${eval(log)}\n`;
            });
            btn_build["Memoization"]["log"] = sectionLog;
            console.log(btn_build["Memoization"]["log"]);
            logToTheDOM(sectionLog);
        };
        note("seems to work fine.");

        // ── Safe Use of Strict Mode ── //
        console.log("// ── Safe Use of Strict Mode ── //");
        (function() {
            'use strict';
            // All your code would go inside this function
        })();

        note(["I don't know what to do with this.","maybe later I'll review this better."]);

        // ─── Arrays ─── //
        btn_build["Strict Mode"] = {"tag":"div",
                "innerHTML":"Strict Mode",
                "classList":['mbtn2-s','log-btn'],
                "log":""};
    
        scriptLog["Strict Mode"] = function(ev){
            console.log(`// ── Strict Mode ── //`);
            // -- code goes here
            let toLog = [
                `>> I don't know what to do with this.`,
                `>> maybe later I'll review this better.`
            ];
            let sectionLog = ``;
            toLog.forEach(log => {
                sectionLog += ` ${log}\n`;
                // sectionLog += `\n  ≫ ${eval(log)}\n`;
            });
            btn_build["Strict Mode"]["log"] = sectionLog;
            console.log(btn_build["Strict Mode"]["log"]);
            logToTheDOM(sectionLog);
        };

        // ── Functions that Define and Rewrite Themselves ── //
        console.log("// ── Functions that Define and Rewrite Themselves ── //");
        function party(){
            console.log('Wow this is amazing!');
            party = function(){
                console.log('Been there, got the T-Shirt');
            }
        }

        function party(){
            console.log('Wow this is amazing!');
            party = function(){
                console.log('Been there, got the T-Shirt');
            }
        }
        const beachParty = party; // note that the party function has not been invoked
        console.log(beachParty()); // the party() function has now been redefined, even though it hasn't been called explicitly
        // << 'Wow this is amazing!'
        console.log(party()); 
        // << 'Been there, got the T-Shirt'
        console.log(beachParty()); // but this function hasn't been redefined
        // << 'Wow this is amazing!'
        console.log(beachParty()); // no matter how many times this is called it will remain the same
        // << 'Wow this is amazing!'

        note("I'm not sure in what could I use this yet.");
        


        // ♦ ─────────────── Building the Buttons ─────────────── ♦ //
        // // ── Template ── //
        // btn_build["template"] = {"tag":"div",
        // "innerHTML":"template",
        // "classList":['mbtn2-s','template-btn', 'hidden']};
        // scriptLog["template"] = function(ev){
        //     console.log(`// ── Template ── //`);
        //     // -- code goes here
        //     let sectionLog = `// ── Template ── //`;
        //     sectionLog += `\n 3+5`;
        //     sectionLog += `\n  ≫ ${3+5}`;
        //     console.log(sectionLog);
        // };

        // ── Template 2 ── //
        btn_build["Template"] = {"tag":"div",
        "innerHTML":"Template",
        "classList":['mbtn2-s','log-btn', 'faded'],
        "log":""};
        scriptLog["Template"] = function(ev){
            console.log(`// ── Template ── //`);
            // -- code goes here
            let toLog = [`parseInt('st',36)`];
            let sectionLog = ``;
            toLog.forEach(log => {
                sectionLog += ` ${log}`;
                sectionLog += `\n  ≫ ${eval(log)}\n`;
            });
            btn_build["Template"]["log"] = sectionLog;
            console.log(btn_build["Template"]["log"]);
        };

        // ── Button Push Animation ── //
        function clickBtn(ev){
            // -- This helps to make the btn look like it was pushed.
            ev.target.classList.add("mbtn2-s-click");
            setTimeout(() => { ev.target.classList.remove("mbtn2-s-click"); }, 100);
        };

        // ── Making Buttons ── //
        // -- Create element.
        // -- Add the class styles.
        // -- Add to the DOM.
        // -- Add events.
        let btnkeys = Object.keys(btn_build);
        btnkeys.forEach(btnkey =>{
            btn[btnkey] = document.createElement('div');
            btn_build[btnkey]["classList"].forEach(class_style =>{
                btn[btnkey].classList.add(class_style);
            })
            btn[btnkey].innerHTML = btn_build[btnkey]["innerHTML"];
            
            actions.appendChild(btn[btnkey]);

            btn[btnkey].addEventListener('click', scriptLog[btnkey]);
            btn[btnkey].addEventListener('click', clickBtn);
        })

        function logToTheDOM(log){
            displayLog.innerHTML = '';
            logs = log.split('\n');
            logs.forEach(line => {
                displayLog.innerHTML += `<p>${line}</p>`;
            });
        }
        // ♦ ─────────────── ─────────────── ─────────────── ♦ //
    
    </script>

</body>
</html>